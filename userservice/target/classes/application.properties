# =====================================================
# RENTIFY - USER SERVICE CONFIGURATION
# Puerto: 8081
# Base de Datos: rentify_users
# =====================================================

# =====================================================
# SERVER CONFIGURATION
# =====================================================
server.port=8081
spring.application.name=userservice

# =====================================================
# DATABASE CONFIGURATION
# =====================================================
spring.datasource.url=jdbc:mysql://localhost:3306/rentify_users?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# =====================================================
# JPA / HIBERNATE CONFIGURATION
# =====================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.open-in-view=false

# =====================================================
# LOGGING CONFIGURATION
# =====================================================
logging.level.root=INFO
logging.level.com.rentify.userservice=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate=INFO

# =====================================================
# ACTIVE PROFILE
# dev: Desarrollo (carga datos de prueba)
# prod: Producci�n (solo datos maestros)
# =====================================================
spring.profiles.active=dev

# =====================================================
# AUTO-POBLACI�N DE DATOS
# =====================================================
# Habilita la carga autom�tica de datos maestros al iniciar
app.init.populate-on-startup=true

# Habilita la carga de datos de prueba (solo en dev/test)
# 5 usuarios: 1 ADMIN, 2 PROPIETARIOS, 2 ARRIENDATARIOS
app.init.load-test-data=true

# =====================================================
# SPRINGDOC / SWAGGER CONFIGURATION
# =====================================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha

# =====================================================
# CORS CONFIGURATION
# =====================================================
# Configurado en CorsConfig.java para:
# - Origins: localhost:5173, localhost:3000, 127.0.0.1:5173
# - Methods: GET, POST, PUT, PATCH, DELETE, OPTIONS
# - Headers: Origin, Content-Type, Accept, Authorization

# =====================================================
# MICROSERVICES URLs
# =====================================================
# Otros microservicios de Rentify
microservices.property-service.url=http://localhost:8082/api
microservices.document-service.url=http://localhost:8083/api
microservices.application-service.url=http://localhost:8084/api
microservices.review-service.url=http://localhost:8086/api
microservices.contact-service.url=http://localhost:8085/api

# =====================================================
# VALIDACIONES Y CONSTANTES
# =====================================================
# Edad m�nima para registro: 18 a�os
app.validation.min-age=18

# Longitud m�nima de contrase�a
app.validation.min-password-length=8

# Dominio DuocUC para beneficio VIP (20% descuento)
app.validation.duoc-domain=@duoc.cl

# Puntos iniciales al registrarse
app.gamification.initial-points=0

# Puntos por referido exitoso
app.gamification.referral-points=100

# =====================================================
# SECURITY (Placeholder - BCrypt para producci�n)
# =====================================================
# En desarrollo usamos contrase�as planas
# En producci�n usar BCryptPasswordEncoder
# app.security.bcrypt-strength=12

# =====================================================
# ACTUATOR (Opcional - para monitoreo)
# =====================================================
# management.endpoints.web.exposure.include=health,info,metrics
# management.endpoint.health.show-details=always

# =====================================================
# NOTAS IMPORTANTES
# =====================================================
#
# 1. DATOS MAESTROS (Siempre se cargan si populate-on-startup=true):
#    - 3 Roles: ADMIN (1), PROPIETARIO (2), ARRIENDATARIO (3)
#    - 3 Estados: ACTIVO (1), INACTIVO (2), SUSPENDIDO (3)
#
# 2. DATOS DE PRUEBA (Solo en dev/test si load-test-data=true):
#    - 5 usuarios de ejemplo con credenciales conocidas
#    - 3 usuarios DuocUC VIP (descuento 20%)
#
# 3. ORDEN DE EJECUCI�N:
#    @Order(1): initRoles()
#    @Order(2): initEstados()
#    @Order(5): printSummary()
#    @Order(10): loadTestUsers() [solo dev/test]
#
# 4. VERIFICACI�N:
#    - Swagger UI: http://localhost:8081/swagger-ui/index.html
#    - Health: http://localhost:8081/actuator/health
#    - API Base: http://localhost:8081/api/usuarios
#
# 5. REINICIAR DESDE CERO:
#    DROP DATABASE rentify_users;
#    CREATE DATABASE rentify_users;
#    mvn spring-boot:run
#
# =====================================================