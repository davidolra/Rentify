# ===============================================================================================
# DOCUMENT SERVICE - APPLICATION PROPERTIES
# Puerto: 8083
# Base de datos: rentify_documents
# ===============================================================================================

# ===============================================================================================
# SERVER CONFIGURATION
# ===============================================================================================
server.port=8083
spring.application.name=document-service

# ===============================================================================================
# DATABASE CONFIGURATION - MySQL
# ===============================================================================================
spring.datasource.url=jdbc:mysql://localhost:3306/rentify_documents?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.profiles.active=dev
# ===============================================================================================
# JPA / HIBERNATE CONFIGURATION
# ===============================================================================================
# Estrategia de DDL:
# - update: Actualiza el schema sin perder datos (RECOMENDADO PARA DESARROLLO)
# - create: Recrea las tablas cada vez (CUIDADO: Borra datos)
# - create-drop: Crea al inicio, borra al cerrar
# - validate: Solo valida el schema
# - none: No hace nada
spring.jpa.hibernate.ddl-auto=update

# Mostrar SQL en logs (�til para debug)
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Dialecto de MySQL
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# Configuraci�n de conexiones
spring.jpa.properties.hibernate.connection.pool_size=10
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ===============================================================================================
# LOGGING CONFIGURATION
# ===============================================================================================
logging.level.root=INFO
logging.level.com.rentify.documentService=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.springframework.web=DEBUG

# Configuraci�n de logs a archivo (opcional)
logging.file.name=logs/document-service.log
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ===============================================================================================
# MICROSERVICES CONFIGURATION
# ===============================================================================================
# URLs de otros microservicios
microservices.user-service.url=http://localhost:8081

# Timeouts
spring.webflux.timeout.read=10000
spring.webflux.timeout.write=10000

# ===============================================================================================
# SWAGGER / OPENAPI CONFIGURATION
# ===============================================================================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha

# ===============================================================================================
# SPRING BOOT ACTUATOR (Health Check, Metrics)
# ===============================================================================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.health.db.enabled=true

# ===============================================================================================
# FILE UPLOAD CONFIGURATION (para futura implementaci�n de carga real de archivos)
# ===============================================================================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ===============================================================================================
# JACKSON CONFIGURATION (JSON Serialization)
# ===============================================================================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=America/Santiago
spring.jackson.date-format=yyyy-MM-dd'T'HH:mm:ss

# ===============================================================================================
# CORS CONFIGURATION (ya manejado en CorsConfig.java, pero por si acaso)
# ===============================================================================================
# spring.web.cors.allowed-origins=http://localhost:5173,http://localhost:3000
# spring.web.cors.allowed-methods=GET,POST,PUT,PATCH,DELETE,OPTIONS
# spring.web.cors.allowed-headers=*
# spring.web.cors.allow-credentials=true

# ===============================================================================================
# CUSTOM PROPERTIES (usadas en DataInitializerConfig)
# ===============================================================================================
# Configuraci�n de inicializaci�n de datos
app.init.populate-on-startup=true
app.init.force-recreate=false

# L�mites de negocio
app.limits.max-documents-per-user=10
app.limits.max-file-size-mb=10

# ===============================================================================================
# PRODUCTION RECOMMENDATIONS
# ===============================================================================================
# Para producci�n, cambiar:
# 1. spring.jpa.hibernate.ddl-auto=validate (no modificar schema autom�ticamente)
# 2. spring.jpa.show-sql=false (no mostrar SQL en logs)
# 3. logging.level.root=WARN (menos logs)
# 4. Usar variables de entorno para credenciales de BD
# 5. Configurar SSL/TLS para la base de datos
# 6. Habilitar Spring Security para autenticaci�n/autorizaci�n
# ===============================================================================================